import{a as d,c as C,h as w,b as E,S as Z,a9 as ee,r as S,aa as te,t as se,j as ae,g as $,N as p,O as ne,e as ie}from"./index.88e04f20.js";const N={dark:{type:Boolean,default:null}};function j(e,t){return d(()=>e.dark===null?t.dark.isActive:e.dark)}var Ce=C({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=d(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>w("div",{class:n.value},E(t.default))}}),Me=C({name:"QItem",props:{...N,...Z,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:i}}=$(),a=j(e,i),{hasLink:r,linkAttrs:o,linkClass:l,linkTag:g,navigateOnClick:V}=ee(),h=S(null),b=S(null),R=d(()=>e.clickable===!0||r.value===!0||e.tag==="label"),m=d(()=>e.disable!==!0&&R.value===!0),W=d(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(a.value===!0?" q-item--dark":"")+(r.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),Y=d(()=>{if(e.insetLevel===void 0)return null;const c=i.lang.rtl===!0?"Right":"Left";return{["padding"+c]:16+e.insetLevel*56+"px"}});function U(c){m.value===!0&&(b.value!==null&&(c.qKeyEvent!==!0&&document.activeElement===h.value?b.value.focus():document.activeElement===b.value&&h.value.focus()),V(c))}function H(c){if(m.value===!0&&te(c,13)===!0){se(c),c.qKeyEvent=!0;const D=new MouseEvent("click",c);D.qKeyEvent=!0,h.value.dispatchEvent(D)}n("keyup",c)}function X(){const c=ae(t.default,[]);return m.value===!0&&c.unshift(w("div",{class:"q-focus-helper",tabindex:-1,ref:b})),c}return()=>{const c={ref:h,class:W.value,style:Y.value,role:"listitem",onClick:U,onKeyup:H};return m.value===!0?(c.tabindex=e.tabindex||"0",Object.assign(c,o.value)):R.value===!0&&(c["aria-disabled"]="true"),w(g.value,c,X())}}}),Te=C({name:"QList",props:{...N,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=$(),i=j(e,n.proxy.$q),a=d(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(i.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>w(e.tag,{class:a.value},E(t.default))}});function M(e,t,n){return n<0?0:e*t**n}function re(e,t=2){const n=10**t;return Math.ceil(e*n)/n}function oe(e,t){return e.map(n=>t(n)).reduce((n,i)=>n+i,0)}function ce(e){return typeof(e!=null?e:void 0)!="undefined"}function I(e){return e instanceof Function?e():e}function le(e){p.create({message:"Not implemented: "+e,type:"TODO"})}function T(e,t=1,n=2){return{defaultSize:t,sizeMultiplierOnReset:n,table:e.map(a=>[t,a]),received:Object.fromEntries(e.map((a,r)=>[r,0]))}}function P(e,t=1){const n=oe(e.table,([a])=>a);let i=Math.random()*n;for(const a in e.table){const r=e.table[a],[o,l]=r;if(i<o)return o>1&&(r[0]=Math.max(1,r[0]-t)),e.received[a]++,ue(e),l;i-=o}throw"pickReward exhausted all rewards"}function ue(e){e.table.every(([t])=>t===1)&&(e.defaultSize*=e.sizeMultiplierOnReset,e.table.forEach(t=>t[0]=e.defaultSize))}const de=["cost","value"];function f(e,t,n,i,a,r){return{name:e,cost:{base:t,growth:n},value:{base:i,growth:a},tierMessages:r}}const u=["Prank","Punk","Scam","Phishing"],B=Object.fromEntries([f("Prank",1,1.5,1,1.5,["You've learned to hang up","Just chillin and eating some jerky, boys",`Mayby don't answer "scam likely"`,"s/jerky/beasty cool now I've got some old school beats"]),f("Punk",10,1.03,10,1.15,["TBD","TBD","TBD","TBD"]),f("Scam",100,1.12,100,1.18,["TBD","TBD","TBD","TBD"]),f("Phishing",1e3,1.15,1e3,1.2,["TBD","TBD","TBD","TBD"])].map(e=>[e.name,e]));f.mkRewardTable=e=>{const t=Math.min(Math.max(1,e),u.length),i=u.slice(0,t).map(a=>de.map(r=>[a,r])).flat(1);return T(i)};const x="gatha-fool",_=()=>Object.fromEntries(u.map(e=>[e,{cost:1,value:1}])),A=()=>Object.fromEntries(u.map(e=>[e,{cost:1,value:1}]));let s=ne({responses:Object.fromEntries(u.map(e=>[e,0])),baseIncome:1,worth:0,bankruptcies:0,divisors:_(),multipliers:A(),crisisMultiplier:10,crisis:{base:{cost:1e3,value:1},scale:{cost:1.5,value:2},cnt:0,rewards:ke(),rewardCnt:1},retirement:{base:{cost:1e5,value:1.5},scale:{cost:1.5,value:1.5},cnt:0,rewards:we(),rewardCnt:()=>s.retirement.cnt},gatchaRewards:f.mkRewardTable(1),gatchaRewardChanceModifier:1,gatchaRewardChanceModifierScaling:2});window.game=s;function Re(e){var r;const t=s.responses[e],n=(r=K.find(o=>o>t))!=null?r:!1;if(!n)return[0,0];const i=n-t;let a=0;for(let o=0;o<i;o++)a+=y(e,"cost",t+o);return[i,a]}function y(e,t,n=s.responses[e]){const i=B[e][t],a=n+(t==="value"?-1:0);return M(i.base,i.growth,a)/s.divisors[e][t]*s.multipliers[e][t]}function fe(e){const t=y(e,"cost");return s.worth>=t?t:0}function G(){let e=s.baseIncome*M(s.crisis.base.value,s.crisis.scale.value,s.crisis.cnt);for(const t of u)e-=y(t,"value");return e}function De(e,t=!1){const[n,i]=t||[1,fe(e)];if(i){const a=s.responses[e],r=s.responses[e]+=n;be(e,a,r),s.worth-=i}}function Q(){s.worth=0;for(const e of u)s.responses[e]=0}function me(e=s.bankruptcies){var o;const t=s.worth>=0?-1:s.worth,n=Object.values(s.responses).slice(0,e),i=u.length;let a=0;for(let l=0;l<i;l++){const g=(o=n[l])!=null?o:0;g<=0||(a+=400/Math.max(g,40)*(l+1))}const r=100-a;return Math.log(t*-1)/Math.log(r)}function Se(){if(s.worth>=0)return;const e=k();s.bankruptcies++;const t=k(),[n,i]=P(s.gatchaRewards,s.gatchaRewardChanceModifier);t!=e&&t<=u.length&&(s.gatchaRewards=f.mkRewardTable(k()-1));const a=me();s.divisors[n][i]+=a;const r=`${n} ${i} reduced by ${re(a)}`;Q(),p.create({message:`broke, broke again
 ${r}`,type:"responseTier"})}function z(e){return M(s[e].base.cost,s[e].scale.cost,s[e].cnt)}const ve=["crisis","retirement"],Le={crisis:"Mid Life Crisis",retirement:"Retire"};function Oe(e){s[e].cnt++,s.bankruptcies=0;for(let n=0;n<I(s[e].rewardCnt);n++){const[i,a]=P(s[e].rewards);a(),p.create({message:`${i}`,type:e})}const t={crisis:ge,retirement:he}[e];t()}function Ee(e){return s.worth>z(e)}function ge(){Q(),s.divisors=_(),s.multipliers=A()}function he(){}const K=[5,10,20,40];function be(e,t,n){const i=K.map((a,r)=>{var o;return t<a&&n>=a?{tier:r,message:(o=B[e].tierMessages[r])!=null?o:"TBD"}:!1}).filter(a=>a!=!1);for(const a of i)if(a){const r=B[e].tierMessages.length-2;console.log({tier:a.tier,maxTiers:r});let o="";const l=1;a.tier===r?(s.multipliers[e].value=0,o=`You no longer fall for ${e}`):a.tier>r?(s.multipliers[e].value-=l,o=`${e} me? No, ${e} you`):s.divisors[e].value+=l,p.create({message:`${a.message} ${o}`,type:"tier"})}return i}function ke(){return T([["Extra Income",()=>s.baseIncome*=1.1],["Less likely to receive same rewards",()=>s.gatchaRewardChanceModifier*=2],["More likely to receive same reward after getting all rewards",()=>s.gatchaRewardChanceModifierScaling*=2]])}function we(){return T([["Rewards per Mid Life Crises",()=>s.crisis.rewardCnt=I(s.crisis.rewardCnt)+1],["Mid Life Crisis cost reduced",()=>s.crisis.base.cost*=.9],["Mid Life Crisis scaling reduced",()=>s.crisis.scale.cost*=.95],["Mid Life Crisis income scaling increased",()=>s.crisis.scale.value*=1.05]])}let L=0;function F(e){const t=e-L;t>500&&(L+=t,s.worth+=G(),v===0?(J(),v--):v>0?v--:pe(!0)),ye(),ie(()=>requestAnimationFrame(F))}qe();requestAnimationFrame(F);let v=-1,J=()=>{};const O=60;function pe(e){const[t,n]=[...ve.map(a=>[a,z(a)]),...u.slice(0,k()).map(a=>[a,y(a,"cost")])].reduce((a,r)=>r[1]<a[1]?r:a);if(n<=s.worth)return 0;const i=G();if(i===0)q(e,"handle zero income",()=>{s.worth=n});else if(i<0)-1*s.worth/i>=O&&q(e,"handle too long until bankrupt",()=>{s.worth=0});else{const r=(n-s.worth)/i;return r>=O&&q(e,"handle too long until buyable",()=>{s.worth=n}),Math.max(r,0)}return 0}function q(e,t,n){!e||(v=30,le(t),J=n)}function k(){return Math.min(s.bankruptcies,s.retirement.cnt)+1}function ye(){const e=JSON.stringify(s);window.localStorage.setItem(x,e)}function qe(){const e=window.localStorage.getItem(x);ce(e)&&(s=JSON.parse(e))}export{u as G,Le as P,Me as Q,j as a,Ce as b,re as c,k as d,s as e,pe as f,me as g,Te as h,G as i,Se as j,Ee as k,Oe as l,v as m,Re as n,y as o,z as p,fe as q,De as r,N as u};
